<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Home</title>
  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Mono">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>
  <div id="main">
    <aside>
      <nav>
        <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Encoder.html">Encoder</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Encoder.html#.create">create</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Encoder.html#close">close</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Encoder.html#encode">encode</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-typedef">T</span><span class="nav-item-name"><a href="global.html#EncoderOptions">EncoderOptions</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#instantiate">instantiate</a></span></li>
      </nav>
    </aside>
    <main>
      




  








  
  <section class="readme">
    <article>
      <h1>Etercast MP3 Encoder</h1>
<p><img src="https://etercast.com/images/og_landscape.jpg" alt="Etercast"></p>
<p>This repository contains part of the <a href="https://etercast.com">Etercast</a> MP3 encoding library. It uses <a href="https://lame.sourceforge.io/">LAME</a> and C/C++ -&gt; WebAssembly compiler <a href="https://emscripten.org">Emscripten</a>.</p>
<h2>How to build it</h2>
<p>If you have <a href="https://emscripten.org">Emscripten</a> installed locally then you can run:</p>
<pre class="prettyprint source lang-sh"><code>make
</code></pre>
<p>Otherwise you can use the <a href="https://www.docker.com/">Docker</a> image by <a href="https://hub.docker.com/r/trzeci/emscripten">trcezi</a> to build the MP3 encoder by executing:</p>
<pre class="prettyprint source lang-sh"><code>npm run build:emscripten
</code></pre>
<h2>How to use it</h2>
<pre class="prettyprint source lang-javascript"><code>import instantiate from '@etercast/mp3'

// instantiate() function fetches and instantiates the WASM module
// and returns a Encoder class.
// If you upload the mp3.wasm to a CDN you can specify the
// WASM url by passing it to instantiate.
// const Encoder = await instantiate('https://mycdn.com/mp3.wasm')
const Encoder = await instantiate()

// You can also use Encoder.create()
const encoder = new Encoder({
  sampleRate: audioContext.sampleRate,
  samples: 2048,
  numChannels: 1
})

// leftChannelData must be a Float32Array with 2048 (the
// specified in the encoder samples option) samples.
// rightChannelData is optional (can be null or undefined).
const encodedMP3Frames = encoder.encode(leftChannelData, rightChannelData)

// Remaining MP3 encoded frames. It flushes available MP3
// frames not returned in the previous call.
const remainingEncodedMP3Frames = encoder.encode()

const blob = new Blob([
  encodedMP3Frames,
  remainingEncodedMP3Frames
], {
  type: 'audio/mp3'
})
const url = URL.createObjectURL(blob)
const a = document.createElement('a')
a.href = url
a.download = 'audio.mp3'
a.dispatchEvent(new MouseEvent('click'))
</code></pre>
<h2>How to build documentation</h2>
<p>Calling <code>npm run build</code> will build this documentation but if you want to build documentation specifically you can run:</p>
<pre class="prettyprint source lang-sh"><code>npm run build:docs
</code></pre>
<h2>Demo</h2>
<p>If you want to see a live demo running, run:</p>
<pre class="prettyprint source lang-sh"><code>npm run serve:examples
</code></pre>
<p>Made with :heart: by <a href="https://rojo2.com">ROJO 2</a></p>
    </article>
  </section>






    </main>
  </div>
  <footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> using <a href="https://github.com/etercast/jsdoc-template">Etercast Template</a>
  </footer>
</body>
</html>